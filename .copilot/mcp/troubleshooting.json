{
  "name": "Common Issues and Solutions",
  "description": "Troubleshooting guide for development issues in the Shopify marketplace monorepo",
  "dependencyIssues": {
    "reactVersionConflict": {
      "error": "ERESOLVE unable to resolve dependency tree - React version conflict",
      "solution": "Use React 18.x for compatibility with Remix and Shopify libraries",
      "fix": "Update package.json to use react@^18.2.0 and react-dom@^18.2.0"
    },
    "viteVersionConflict": {
      "error": "Override for vite conflicts with direct dependency",
      "solution": "Ensure resolutions and overrides match dependency versions",
      "fix": "Check package.json resolutions and overrides sections for consistency"
    },
    "eslintPluginMissing": {
      "error": "ESLint couldn't find plugin eslint-plugin-prettier in apps/admin-app",
      "solution": "Install missing ESLint plugins in sub-apps",
      "fix": "cd apps/admin-app && npm install eslint-plugin-prettier --save-dev"
    }
  },
  "buildIssues": {
    "typescriptVersion": {
      "warning": "TypeScript version not officially supported by @typescript-eslint",
      "impact": "Linting may not work correctly but build still succeeds",
      "solution": "Consider downgrading TypeScript to supported version or update ESLint config"
    },
    "remixConfig": {
      "warning": "@remix-run/eslint-config package is deprecated",
      "solution": "Migrate to streamlined ESLint config as shown in Remix templates",
      "action": "Update .eslintrc.cjs to use modern configuration"
    },
    "emptyChunks": {
      "warning": "Generated empty chunks for webhooks",
      "impact": "Normal behavior for unused webhook routes",
      "action": "Can be ignored or remove unused route files"
    }
  },
  "developmentIssues": {
    "shopifyAuth": {
      "issue": "Authentication failures",
      "causes": [
        "Missing or incorrect SHOPIFY_API_KEY",
        "Missing or incorrect SHOPIFY_API_SECRET",
        "Incorrect SCOPES configuration",
        "Not logged in via Shopify CLI"
      ],
      "solutions": [
        "Verify .env file configuration",
        "Run 'shopify auth login'",
        "Check app settings in Shopify Partner Dashboard",
        "Ensure SCOPES match partner dashboard configuration"
      ]
    },
    "prismaIssues": {
      "issue": "Database or Prisma client issues",
      "causes": [
        "Prisma client not generated",
        "Database schema out of sync",
        "Missing DATABASE_URL"
      ],
      "solutions": [
        "Run 'npx prisma generate'",
        "Run 'npx prisma migrate dev'",
        "Check DATABASE_URL in .env file"
      ]
    },
    "graphqlTypes": {
      "issue": "GraphQL type errors",
      "causes": [
        "Types not generated",
        "Schema changes not reflected",
        "Codegen configuration issues"
      ],
      "solutions": [
        "Run 'npm run graphql-codegen'",
        "Check .graphqlrc.ts configuration",
        "Verify GraphQL queries syntax"
      ]
    }
  },
  "monorepoIssues": {
    "workspaces": {
      "issue": "Workspace dependency resolution",
      "solution": "Ensure npm workspaces are properly configured",
      "check": "Verify workspaces field in root package.json"
    },
    "pathResolution": {
      "issue": "Module resolution between apps",
      "solution": "Each app should be self-contained",
      "avoid": "Cross-app imports should be minimal and explicit"
    }
  },
  "performanceIssues": {
    "slowBuild": {
      "causes": [
        "Large node_modules cache",
        "TypeScript compilation overhead",
        "Vite cache issues"
      ],
      "solutions": [
        "Clear cache: rm -rf node_modules/.cache",
        "Restart dev server",
        "Consider using Vite's exclude option for large dependencies"
      ]
    },
    "hotReload": {
      "issue": "HMR not working properly",
      "solutions": [
        "Check vite.config.ts HMR configuration",
        "Verify network settings for remote development",
        "Restart dev server"
      ]
    }
  },
  "shopifySpecific": {
    "tunneling": {
      "issue": "Shopify CLI tunnel issues",
      "solutions": [
        "Use shopify app dev instead of manual tunneling",
        "Check firewall and network settings",
        "Verify SHOPIFY_APP_URL configuration"
      ]
    },
    "rateLimiting": {
      "issue": "Shopify API rate limit errors",
      "solutions": [
        "Implement proper retry logic",
        "Use GraphQL instead of REST where possible",
        "Batch API calls when possible"
      ]
    },
    "webhooks": {
      "issue": "Webhook delivery failures",
      "solutions": [
        "Verify webhook URL is accessible",
        "Check HMAC verification implementation",
        "Test with ngrok or Shopify CLI tunnel"
      ]
    }
  },
  "quickFixes": {
    "cleanInstall": [
      "rm -rf node_modules package-lock.json",
      "npm install"
    ],
    "resetDatabase": [
      "npx prisma migrate reset",
      "npx prisma generate"
    ],
    "regenerateTypes": [
      "npm run graphql-codegen",
      "npx prisma generate"
    ],
    "clearCaches": [
      "rm -rf node_modules/.cache",
      "rm -rf build/",
      "rm -rf .remix/"
    ]
  },
  "debuggingTips": {
    "logs": [
      "Check browser dev tools console",
      "Use 'shopify app logs' for production debugging",
      "Add console.log statements in loaders/actions"
    ],
    "network": [
      "Use browser Network tab to inspect API calls",
      "Check Shopify GraphiQL explorer for query testing",
      "Verify authentication headers are included"
    ],
    "development": [
      "Use Remix dev tools for route debugging",
      "Enable TypeScript strict mode for better error catching",
      "Use Prisma Studio for database inspection"
    ]
  }
}